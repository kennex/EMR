<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
	<changeSet id="emr-v1.0.0" author="Benjamin Mwalimu Mulyungi">
		<comment>This is the table to hold the staff attributes</comment>
		<createTable tableName="staff">
			<column name="staff_id" autoIncrement="true" type="int">
				<constraints primaryKey="true" nullable="false"></constraints>
			</column>
			<column name="staff_Fname" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="staff_Sname" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="staff_Lname" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="staff_Email" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="staff_PhoneNumber" type="int"><constraints nullable="false"></constraints></column>
			<column name="staff_box" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="staff_dateOfBirth" type="DATETIME"><constraints nullable="false"></constraints></column>
			<column name="staff_jobIdentity" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="dateCreated" type="DATETIME"><constraints nullable="false"></constraints></column>
			<column name="retired" type="BOOLEAN" defaultValueBoolean="false"><constraints nullable="false"></constraints></column>
			<column name="dateretired" type="DATETIME"><constraints nullable="false"></constraints></column>
			<column name="retiredBy" type="int"><constraints nullable="false"></constraints></column>
			<column name="staff_uuid" type="varchar(255)"><constraints nullable="false"></constraints></column>
		</createTable>
	</changeSet>
	<changeSet id="emr-v1.0.1" author="Benjamin Mwalimu Mulyungi">
		<comment>This is the table to handle the registration of patients</comment>
		<createTable tableName="patients">
			<column name="patients_id" autoIncrement="true"
			        type="int"><constraints primaryKey="true" nullable="false"></constraints></column>
			<column name="pt_Fname" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="pt_Sname" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="pt_Lname" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="pt_PhoneNumber" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="pt_dateOfBirth" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="pt_NextofKin" type="varchar(255)"><constraints nullable="false"></constraints></column>
			<column name="dateCreated" type="DATETIME"><constraints nullable="false"></constraints></column>
			<column name="createdBy" type="int"><constraints nullable="false"></constraints></column>
			<column name="deceased" type="BOOLEAN" defaultValueBoolean="false"><constraints nullable="false"></constraints></column>
			<column name="deathDate" type="DATETIME"><constraints nullable="false"></constraints></column>
			<column name="deathReportedBy" type="int"><constraints nullable="false"></constraints></column>
			<column name="pt_uuid" type="varchar(255)"><constraints nullable="false"></constraints></column>
		</createTable>
		<addForeignKeyConstraint baseTableName="patients" baseColumnNames="createdBy" constraintName="pt_createdBy_fk"
		                         referencedTableName="staff"
		                         referencedColumnNames="staff_id"></addForeignKeyConstraint>
		<addForeignKeyConstraint baseTableName="patients" baseColumnNames="deathReportedBy"
		                         constraintName="pt_deathReportedBy_fk"
		                         referencedTableName="staff"
		                         referencedColumnNames="staff_id"></addForeignKeyConstraint>
	</changeSet>
	<changeSet id="emr-v1.0.2" author="Benjamin Mwalimu Mulyungi">
		<comment>This is the table to handle the diagnosis made by the doctors</comment>
		<createTable tableName="diagnosis">
			<column name="diag_id" autoIncrement="true" type="int"><constraints nullable="false" primaryKey="true"></constraints></column>
			<column name="patient_id" type="int"><constraints nullable="false"></constraints></column>
			<column name="diag_description" type="varchar(1024)"><constraints nullable="false"></constraints></column>
			<column name="diag_Date" type="DATETIME"><constraints nullable="false"></constraints></column>
			<column name="diag_By" type="int"><constraints nullable="false"></constraints></column>
		</createTable>
		<addForeignKeyConstraint baseTableName="diagnosis" baseColumnNames="patient_id" constraintName="diag_patient_id_fk"
		                         referencedTableName="patients"
		                         referencedColumnNames="patients_id"></addForeignKeyConstraint>
		<addForeignKeyConstraint baseTableName="diagnosis" baseColumnNames="diag_By" constraintName="diag_diag_By_fk"
		                         referencedTableName="staff"
		                         referencedColumnNames="staff_id"></addForeignKeyConstraint>
	</changeSet>
</databaseChangeLog>
